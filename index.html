<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Precvičovanie nemčiny</title>

  <!-- PWA META -->
  <meta name="theme-color" content="#4f46e5" />
  <link rel="manifest" href="/nemecky-jazyk/manifest.webmanifest" />
  <link rel="apple-touch-icon" href="/nemecky-jazyk/icon.png">

  <!-- Tailwind + fonty -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap" rel="stylesheet" />
</head>
<body>
  <!-- …tvoj obsah aplikácie (slovník, auto režim panel, tlačidlá)… -->

  <script>
  // Registrácia Service Workera s auto-update
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/nemecky-jazyk/sw.js').then((reg) => {
        if (reg.waiting) reg.waiting.postMessage({ type: 'SKIP_WAITING' });

        reg.addEventListener('updatefound', () => {
          const nw = reg.installing;
          if (!nw) return;
          nw.addEventListener('statechange', () => {
            if (nw.state === 'installed' && navigator.serviceWorker.controller) {
              reg.waiting && reg.waiting.postMessage({ type: 'SKIP_WAITING' });
            }
          });
        });
      }).catch(console.error);

      navigator.serviceWorker.addEventListener('controllerchange', () => {
        setTimeout(() => location.reload(), 100);
      });
    });
  }
  </script>
</body>
</html>
